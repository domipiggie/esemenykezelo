<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/loginpage.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Regisztráció</title>
</head>
    <section class="h-100 gradient-form" style="background-color: #eee;">
        <div class="container py-5 h-100">
          <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col-xl-10">
              <div class="card rounded-3 text-black">
                <div class="row g-0">
                  <div class="col-lg-6">
                    <div class="card-body p-md-5 mx-md-4">
      
                      <div class="text-center">
                        <img src="https://yt3.googleusercontent.com/2yxWq02_c55KhO-8RLYtwLhWSMERMNEORwpLhJaxWvpA225qIwLRIP9uNQlyFYDzcDjNBp7wgA=s900-c-k-c0x00ffffff-no-rj"
                          style="width: 185px;" alt="logo">
                        <h4 class="mt-1 mb-5 pb-1">Üdvözlégy köztünk!</h4>
                      </div>
      
                      <form>
                        <p>Adj meg egy email címet és egy jelszót!</p>
      
                        <div data-mdb-input-init class="form-outline mb-4">
                          <input type="email" id="form2Example11" class="form-control"/>
                          <label class="form-label" for="form2Example11">Felhasználónév</label>
                        </div>
      
                        <div data-mdb-input-init class="form-outline mb-4">
                          <input type="password" id="form2Example22" class="form-control" />
                          <label class="form-label" for="form2Example22">Jelszó</label>
                        </div>

                        <div data-mdb-input-init class="form-outline mb-4">
                            <input type="password" id="form2Example33" class="form-control" />
                            <label class="form-label" for="form2Example33">Jelszó megismétlése</label>
                          </div>
      
      
                        <div class="d-flex align-items-center justify-content-center pb-4">
                          <button id="register" type="button" data-mdb-button-init data-mdb-ripple-init class="btn btn-outline-danger">Regisztráció</button>
                        </div>
      
                      </form>
      
                    </div>
                  </div>
                  <div class="col-lg-6 d-flex align-items-center gradient-custom-2">
                    <div class="text-white px-3 py-4 p-md-5 mx-md-4">
                      <h4 class="mb-4">Légy a csapat tagja!</h4>
                      <p class="small mb-0">Egy gyors regisztrációval hozzáférést nyersz rengeteg sajátos rendezvényhez, programhoz, összejövetelhez!</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCNWYxskOcWrPruI5fmx8BM51V4zgcJVYU",
            authDomain: "kozossegi-esemeny-portal.firebaseapp.com",
            projectId: "kozossegi-esemeny-portal",
            storageBucket: "kozossegi-esemeny-portal.appspot.com",
            messagingSenderId: "987444679907",
            appId: "1:987444679907:web:d8f55e9b459ab722a7a1d6"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        auth.onAuthStateChanged(user => {
            if (user) {
                window.location = 'index.html'; //If User is not logged in, redirect to login page
            }
        });

        const emailInput = document.getElementById("form2Example11")
        const passInput = document.getElementById("form2Example22")
        const regisButton = document.getElementById("register")

        regisButton.addEventListener('click', function (e) {
            e.preventDefault()

            createUserWithEmailAndPassword(auth, emailInput.value, passInput.value).then(function (userCredential) {
                var user = userCredential.user;
                console.log("ok ", user);
            })
                .catch(function (error) {
                    var errorCode = error.code;
                    var errorMessage = error.message;
                    console.log("Hiba: " + errorCode + " " + errorMessage)
                })
        })
    </script>
</html>